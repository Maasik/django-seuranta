/* server_clock.js Raphael Stefanini*/
var ServerClock=function(e){var f={drift:0,time_api_url:null},d=$.extend({},f,e),c=d.drift,b=this;if(d.time_api_url){(function a(){var g=+new Date();$.ajax({type:"GET",url:d.time_api_url,data:{t:+g/1000},dataType:"json"}).done(function(n){var k=+new Date(),l=n.time*1000,m=n.drift*1000,i=k-l,h=(k-g)/2,j=(m-i)/2;c+=j-h});setTimeout(a,300*1000)})()}b.now=function(){return +new Date()+c};b.getDrift=function(){return c};return b};